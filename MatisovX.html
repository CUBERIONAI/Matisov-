<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Matisov X</title>

<script src="https://telegram.org/js/telegram-web-app.js"></script>
<script src="https://cdn.tailwindcss.com"></script>

<style>
@import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&display=swap');
body{
  margin:0;
  background:radial-gradient(circle at 50% 30%, #0b2a44, #02040a);
  color:#fff;
  font-family:'Orbitron',sans-serif;
  overflow:hidden;
}
.viewport{height:60vh;position:relative;}
.hero{height:52vh;filter:drop-shadow(0 0 40px #00d2ff);animation:idle 3s ease-in-out infinite;}
@keyframes idle{50%{transform:translateY(-12px)}}
.tap-text{position:absolute;font-size:2rem;font-weight:900;color:#00d2ff;pointer-events:none;animation:float .6s forwards;}
@keyframes float{to{transform:translateY(-200px);opacity:0}}
.menu{position:fixed;inset:0;background:#02040af0;z-index:100;display:none;}
.menu-box{background:#000;border:1px solid #00d2ff55;border-radius:20px;padding:20px;max-width:420px;margin:auto;margin-top:10vh;}
button{background:#00d2ff;color:#000;padding:10px 14px;border-radius:12px;font-weight:900;}
.task{border:1px solid #00d2ff44;padding:10px;border-radius:12px;margin-bottom:10px;}
</style>
</head>

<body>

<header class="p-6 flex justify-between">
  <div>
    <div class="text-xs text-blue-400">BALANCE</div>
    <div class="text-4xl font-black">
      <span id="bal">0</span> MX
    </div>
  </div>
  <button onclick="openMenu()">MENU</button>
</header>

<main class="viewport" id="zone">
  <div style="text-align:center">
    <img class="hero" id="hero" src="https://raw.githubusercontent.com/CUBERIONAI/Matisov-X/main/file_0000000008b471f48ebdb6f35b1b1a5a.png">
  </div>
</main>

<div class="px-6">
  <div class="bg-black/70 rounded-2xl p-4">
    <div class="flex justify-between text-sm">
      <span>Energy</span>
      <span id="energyTxt"></span>
    </div>
    <div class="h-3 bg-black rounded-full overflow-hidden">
      <div id="energyBar" class="h-full bg-cyan-400"></div>
    </div>
  </div>
</div>

<!-- MENU -->
<div class="menu" id="menu">
  <div class="menu-box">
    <div class="flex justify-between mb-4">
      <b>MENU</b>
      <button onclick="closeMenu()">X</button>
    </div>

    <h3>UPGRADES</h3>
    <p>Tap Power Lv.<span id="tapLv"></span></p>
    <button onclick="upgradeTap()">Upgrade Tap</button>

    <p class="mt-2">Energy Core Lv.<span id="energyLv"></span></p>
    <button onclick="upgradeEnergy()">Upgrade Energy</button>

    <hr class="my-4">

    <h3>TASKS</h3>

    <div class="task">
      Telegram Channel +3,000,000 MX  
      <button onclick="task('tg')">Claim</button>
    </div>

    <div class="task">
      Telegram Chat +2,000,000 MX  
      <button onclick="task('chat')">Claim</button>
    </div>

    <div class="task">
      YouTube +2,000,000 MX  
      <button onclick="task('yt')">Claim</button>
    </div>

    <div class="task">
      Instagram +1,000,000 MX  
      <button onclick="task('ig')">Claim</button>
    </div>

    <div class="task">
      X (Twitter) +2,000,000 MX  
      <button onclick="task('x')">Claim</button>
    </div>

  </div>
</div>

<script>
Telegram.WebApp.expand();

const save=k=>JSON.parse(localStorage.getItem(k));
const store=(k,v)=>localStorage.setItem(k,JSON.stringify(v));

let state=save("mx")||{
  bal:0,
  energy:1000,
  tap:1,
  tapLv:1,
  energyLv:1,
  tasks:{}
};

function ui(){
  bal.textContent=state.bal.toLocaleString();
  energyTxt.textContent=`${state.energy}/1000`;
  energyBar.style.width=(state.energy/1000*100)+"%";
  tapLv.textContent=state.tapLv;
  energyLv.textContent=state.energyLv;
}
ui();

zone.addEventListener("touchstart",tap,{passive:false});
function tap(e){
  e.preventDefault();
  if(state.energy<1)return;
  state.energy--;
  state.bal+=state.tap;
  fx(e.touches[0].clientX,e.touches[0].clientY);
  store("mx",state);
  ui();
}

function fx(x,y){
  const t=document.createElement("div");
  t.className="tap-text";
  t.style.left=x+"px";
  t.style.top=y+"px";
  t.textContent="+"+state.tap;
  document.body.appendChild(t);
  setTimeout(()=>t.remove(),600);
}

setInterval(()=>{
  if(state.energy<1000){
    state.energy+=3;
    ui();
  }
},1000);

function openMenu(){menu.style.display="block";}
function closeMenu(){menu.style.display="none";}

function upgradeTap(){
  let cost=state.tapLv<3?5000:1000000*state.tapLv;
  if(state.bal<cost)return alert("Not enough MX");
  state.bal-=cost;
  state.tapLv++;
  state.tap+=1;
  store("mx",state);
  ui();
}

function upgradeEnergy(){
  let cost=state.energyLv<3?5000:1000000*state.energyLv;
  if(state.bal<cost)return alert("Not enough MX");
  state.bal-=cost;
  state.energyLv++;
  state.energy+=200;
  store("mx",state);
  ui();
}

function task(id){
  if(state.tasks[id])return alert("Already claimed");
  let reward={
    tg:3000000,
    chat:2000000,
    yt:2000000,
    ig:1000000,
    x:2000000
  }[id];
  state.bal+=reward;
  state.tasks[id]=true;
  store("mx",state);
  ui();
}
</script>

</body>
</html>
