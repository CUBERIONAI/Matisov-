<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Matisov X ‚Äî Cyber Samurai</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>
<script src="https://cdn.tailwindcss.com"></script>
<style>
@import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&display=swap');
:root{
  --neon:#00d2ff;
  --bg:#02040a;
}
body{
  margin:0;
  background:radial-gradient(circle at 50% 30%, #0b2a44, var(--bg));
  color:#fff;
  font-family:'Orbitron',sans-serif;
  overflow:hidden;
}
header{
  display:flex;justify-content:space-between;padding:1.5rem;
}
.viewport{
  position:relative;height:60vh;overflow:hidden;
}
.cyber-floor{
  position:absolute;bottom:-60%;left:-50%;width:200%;height:200%;
  background:
    linear-gradient(var(--neon) 1px, transparent 1px),
    linear-gradient(90deg,var(--neon) 1px, transparent 1px);
  background-size:80px 80px;
  opacity:.15;transform:rotateX(70deg);
}
.hero-wrap{
  position:absolute;bottom:6%;left:50%;transform:translateX(-50%);
  filter:drop-shadow(0 0 40px var(--neon));
}
#hero{height:52vh;transition:transform .12s ease;animation:idle 3s ease-in-out infinite;}
@keyframes idle{0%,100%{transform:translateY(0)}50%{transform:translateY(-12px)}}
.tap-text{
  position:absolute;font-size:2.4rem;font-weight:900;color:var(--neon);
  pointer-events:none;animation:float .6s forwards;text-shadow:0 0 20px var(--neon);
}
@keyframes float{to{transform:translateY(-200px) scale(1.6);opacity:0}}
.spark{
  position:absolute;width:5px;height:5px;background:var(--neon);
  border-radius:50%;box-shadow:0 0 10px var(--neon);pointer-events:none;
}
.upgrade-panel{
  position:fixed;bottom:5%;left:50%;transform:translateX(-50%);
  background:rgba(0,0,0,0.7);backdrop-filter:blur(12px);
  border:1px solid rgba(255,255,255,0.1);border-radius:1.5rem;
  padding:1rem;width:90%;max-width:500px;
}
.upgrade-btn{
  background:rgba(0,210,255,0.2);border:1px solid var(--neon);
  border-radius:1rem;padding:.5rem 1rem;margin:0.3rem;flex:1;
  text-align:center;font-weight:700;color:#00d2ff;cursor:pointer;
}
.upgrade-row{display:flex;justify-content:space-between;align-items:center;margin-bottom:0.3rem;}
</style>
</head>
<body>
<header>
  <div>
    <div class="text-xs text-blue-400 uppercase tracking-widest">Matisov X ‚Äî Network Balance</div>
    <div class="text-5xl font-black italic">
      <span id="bal">5,046,656</span>
      <span class="text-blue-400 text-xl">MX</span>
    </div>
  </div>
  <div class="px-4 py-1 border border-blue-400/40 rounded-full text-xs">
    STAGE 2 ‚Äî SAMURAI
  </div>
</header>

<main class="viewport" id="tapZone">
  <div class="cyber-floor"></div>
  <div class="hero-wrap">
    <img id="hero" src="https://raw.githubusercontent.com/CUBERIONAI/Matisov-X/main/file_0000000008b471f48ebdb6f35b1b1a5a.png">
  </div>
</main>

<div class="px-6 -mt-10">
  <div class="bg-black/60 backdrop-blur-xl rounded-3xl p-5 border border-white/10">
    <div class="flex justify-between text-xs mb-2">
      <span>‚ö° Energy</span>
      <span id="energyText">1000 / 1000</span>
    </div>
    <div class="h-3 bg-black rounded-full overflow-hidden">
      <div id="energyBar" class="h-full bg-gradient-to-r from-cyan-400 to-blue-600"></div>
    </div>
  </div>
</div>

<div class="upgrade-panel" id="upgradePanel">
  <div class="upgrade-row">
    <div>üí™ Cyber Hands (Energy +)</div>
    <div class="upgrade-btn" onclick="upgradeSkill('cyberHands')">Upgrade</div>
    <div id="cyberHandsLvl">0/10</div>
  </div>
  <div class="upgrade-row">
    <div>‚öîÔ∏è Sword Power (Tap +)</div>
    <div class="upgrade-btn" onclick="upgradeSkill('swordPower')">Upgrade</div>
    <div id="swordPowerLvl">0/10</div>
  </div>
  <div class="upgrade-row">
    <div>‚ú® AI Magic (Multi Tap)</div>
    <div class="upgrade-btn" onclick="upgradeSkill('aiMagic')">Upgrade</div>
    <div id="aiMagicLvl">0/10</div>
  </div>
  <div class="upgrade-row">
    <div>ü™ô Blockchain (Auto MX)</div>
    <div class="upgrade-btn" onclick="upgradeSkill('blockchain')">Upgrade</div>
    <div id="blockchainLvl">0/10</div>
  </div>
</div>

<script>
Telegram.WebApp.expand();

// Config
const cfg={tap:12,maxE:1000,regen:3};

// State
let st={bal:5046656,e:1000};
let upgrades={
  cyberHands:{level:0,max:10,baseCost:100,energyBonus:10},
  swordPower:{level:0,max:10,baseCost:150,tapBonus:12},
  aiMagic:{level:0,max:10,baseCost:200,multiTap:true},
  blockchain:{level:0,max:10,baseCost:500,autoMX:true}
};

const hero=document.getElementById('hero');
const zone=document.getElementById('tapZone');

zone.addEventListener('touchstart',tap,{passive:false});
zone.addEventListener('mousedown',tap,{passive:false}); // desktop click

function tap(e){
  e.preventDefault();
  if(st.e<cfg.tap)return;

  const x=(e.touches)?e.touches[0].clientX:e.clientX;
  const y=(e.touches)?e.touches[0].clientY:e.clientY;

  st.e-=cfg.tap;
  st.bal+=cfg.tap + (upgrades.swordPower.level*upgrades.swordPower.tapBonus);

  // AI Magic Multi-Tap Chance
  if(Math.random()<0.25 && upgrades.aiMagic.level>0){
    st.bal+=cfg.tap*upgrades.aiMagic.level;
  }

  hero.style.transform="scale(.9) rotate(-3deg)";
  setTimeout(()=>hero.style.transform="",120);

  renderFX(x,y);
  Telegram.WebApp.HapticFeedback?.impactOccurred("medium");
  ui();
}

function renderFX(x,y){
  const txt=document.createElement('div');
  txt.className='tap-text'; txt.style.left=x+'px'; txt.style.top=y+'px';
  txt.textContent='+'+cfg.tap; document.body.appendChild(txt);
  setTimeout(()=>txt.remove(),600);

  for(let i=0;i<8;i++){
    const s=document.createElement('div'); s.className='spark';
    s.style.left=x+'px'; s.style.top=y+'px';
    document.body.appendChild(s);
    const dx=(Math.random()-.5)*300;
    const dy=(Math.random()-.5)*300;
    s.animate([{transform:'translate(0,0)',opacity:1},{transform:`translate(${dx}px,${dy}px)`,opacity:0}],{duration:500}).onfinish=()=>s.remove();
  }
}

function upgradeSkill(skill){
  const s=upgrades[skill];
  const cost=Math.floor(s.baseCost*Math.pow(1.5,s.level));
  if(st.bal>=cost && s.level<s.max){
    st.bal-=cost;
    s.level++;
    applyUpgrade(skill);
    ui();
  }
}

function applyUpgrade(skill){
  switch(skill){
    case 'cyberHands': cfg.maxE=1000 + upgrades.cyberHands.level*upgrades.cyberHands.energyBonus; break;
    case 'swordPower': break;
    case 'aiMagic': break;
    case 'blockchain': break;
  }
}

setInterval(()=>{
  if(st.e<cfg.maxE){st.e=Math.min(cfg.maxE,st.e+cfg.regen);ui();}
  // Blockchain Auto MX
  if(upgrades.blockchain.level>0){
    st.bal+=upgrades.blockchain.level*2; // +2 MX per sec per level
  }
},1000);

function ui(){
  document.getElementById('bal').textContent=st.bal.toLocaleString();
  document.getElementById('energyText').textContent=`${st.e} / ${cfg.maxE}`;
  document.getElementById('energyBar').style.width=(st.e/cfg.maxE*100)+'%';
  document.getElementById('cyberHandsLvl').textContent=`${upgrades.cyberHands.level}/10`;
  document.getElementById('swordPowerLvl').textContent=`${upgrades.swordPower.level}/10`;
  document.getElementById('aiMagicLvl').textContent=`${upgrades.aiMagic.level}/10`;
  document.getElementById('blockchainLvl').textContent=`${upgrades.blockchain.level}/10`;
}

ui();
</script>
</body>
</html>
