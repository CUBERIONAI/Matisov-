<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Matisov X — Cyber Samurai</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>
<script src="https://cdn.tailwindcss.com"></script>
<style>
@import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&display=swap');
:root{
  --neon:#00d2ff;
  --bg:#02040a;
}
body{
  margin:0;
  background:radial-gradient(circle at 50% 30%, #0b2a44, var(--bg));
  color:#fff;
  font-family:'Orbitron',sans-serif;
  overflow:hidden;
}
header{
  padding:1rem;
  display:flex;
  justify-content:space-between;
  align-items:center;
}
.header-title{
  font-size:1.5rem;
  font-weight:900;
  text-transform:uppercase;
  color:var(--neon);
}
.viewport{
  position:relative;
  height:60vh;
  overflow:hidden;
}
.cyber-floor{
  position:absolute;
  bottom:-60%;
  left:-50%;
  width:200%;
  height:200%;
  background:
    linear-gradient(var(--neon) 1px, transparent 1px),
    linear-gradient(90deg,var(--neon) 1px, transparent 1px);
  background-size:80px 80px;
  opacity:.15;
  transform:rotateX(70deg);
}
.hero-wrap{
  position:absolute;
  bottom:6%;
  left:50%;
  transform:translateX(-50%);
  filter:drop-shadow(0 0 40px var(--neon));
}
#hero{
  height:52vh;
  transition:transform .12s ease;
  animation:idle 3s ease-in-out infinite;
}
@keyframes idle{0%,100%{transform:translateY(0)}50%{transform:translateY(-12px)}}
.tap-text{
  position:absolute;
  font-size:2.4rem;
  font-weight:900;
  color:var(--neon);
  pointer-events:none;
  animation:float .6s forwards;
  text-shadow:0 0 20px var(--neon);
}
@keyframes float{to{transform:translateY(-200px) scale(1.6);opacity:0}}
.spark{
  position:absolute;
  width:5px;height:5px;
  background:var(--neon);
  border-radius:50%;
  box-shadow:0 0 10px var(--neon);
  pointer-events:none;
}
.stats-panel{
  position:relative;
  margin:1rem;
  background:rgba(0,0,0,0.6);
  backdrop-filter:blur(15px);
  border-radius:2rem;
  padding:1rem;
  border:1px solid rgba(255,255,255,0.08);
}
.energy-bar{
  height:0.5rem;
  background:linear-gradient(to right,#0ff,#00d2ff);
  border-radius:0.5rem;
  transition:width 0.3s;
}
.upgrade-menu{
  position:absolute;
  top:10%;
  left:50%;
  transform:translateX(-50%);
  width:90%;
  max-width:400px;
  background:rgba(0,0,0,0.85);
  border-radius:2rem;
  padding:1rem;
  display:none;
  flex-direction:column;
  gap:1rem;
  z-index:100;
}
.upgrade-menu h2{
  text-align:center;
  font-weight:900;
  font-size:1.2rem;
  color:var(--neon);
}
.upgrade-item{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:0.5rem;
  background:rgba(255,255,255,0.05);
  border-radius:1rem;
  cursor:pointer;
  transition:0.2s;
}
.upgrade-item:hover{background:rgba(255,255,255,0.15);}
.upgrade-item span{font-weight:700;}
</style>
</head>
<body>
<header>
  <div class="header-title">Matisov X</div>
  <div>
    <div>Balance</div>
    <div><span id="bal">5,046,656</span> MX</div>
  </div>
</header>

<main class="viewport" id="tapZone">
  <div class="cyber-floor"></div>
  <div class="hero-wrap">
    <img id="hero"
     src="https://raw.githubusercontent.com/CUBERIONAI/Matisov-X/main/file_0000000008b471f48ebdb6f35b1b1a5a.png">
  </div>
</main>

<div class="stats-panel">
  <div class="flex justify-between mb-2">
    <span>⚡ Energy</span>
    <span id="energyText">1000 / 1000</span>
  </div>
  <div class="energy-bar" id="energyBar"></div>
</div>

<div class="upgrade-menu" id="upgradeMenu">
  <h2>Upgrade</h2>
  <div class="upgrade-item" data-type="hands">
    <span>Hyper Cyber Hands</span><span id="handsLevel">Lv 0</span><span id="handsCost">10k MX</span>
  </div>
  <div class="upgrade-item" data-type="sword">
    <span>Sword Power</span><span id="swordLevel">Lv 0</span><span id="swordCost">25k MX</span>
  </div>
  <div class="upgrade-item" data-type="ai">
    <span>AI Magic</span><span id="aiLevel">Lv 0</span><span id="aiCost">50k MX</span>
  </div>
  <button id="closeUpgrades">Close</button>
</div>
<button style="position:fixed;bottom:1rem;right:1rem;z-index:100;" onclick="toggleUpgradeMenu()">Upgrade</button>

<script>
Telegram.WebApp.expand();

// Config
const cfg={tap:12,maxE:1000,regen:3};
let st={bal:5046656,e:1000,upgrades:{hands:0,sword:0,ai:0},referrals:0,botActive:false};
const hero=document.getElementById('hero');
const zone=document.getElementById('tapZone');

let lastTap=0;
zone.addEventListener('touchstart',tap,{passive:false});
zone.addEventListener('mousedown',tap);

function tap(e){
  e.preventDefault();
  const now=Date.now();
  if(now-lastTap<50){ // anti-multitap
    st.bal=Math.floor(st.bal*0.5);
    alert("Multi-tap detected! 50% penalty applied!");
    return;
  }
  lastTap=now;
  if(st.e<cfg.tap) return;
  const t=e.touches?e.touches[0]:e;
  st.e-=cfg.tap;
  let power = cfg.tap + st.upgrades.sword*2;
  if(st.upgrades.ai>0){power*=1+st.upgrades.ai*0.1;}
  st.bal+=Math.floor(power);
  hero.style.transform="scale(.9) rotate(-3deg)";
  setTimeout(()=>hero.style.transform="",120);
  fx(t.clientX,t.clientY);
  Telegram.WebApp.HapticFeedback?.impactOccurred("medium");
  ui();
}

// Tap effects
function fx(x,y){
  const txt=document.createElement('div');
  txt.className='tap-text';
  txt.style.left=x+'px'; txt.style.top=y+'px';
  txt.textContent='+'+cfg.tap+' MX';
  document.body.appendChild(txt);
  setTimeout(()=>txt.remove(),600);
  for(let i=0;i<8;i++){
    const s=document.createElement('div');
    s.className='spark'; s.style.left=x+'px'; s.style.top=y+'px';
    document.body.appendChild(s);
    const dx=(Math.random()-.5)*300; const dy=(Math.random()-.5)*300;
    s.animate([{transform:'translate(0,0)',opacity:1},{transform:`translate(${dx}px,${dy}px)`,opacity:0}],{duration:500}).onfinish=()=>s.remove();
  }
}

// Energy regen
setInterval(()=>{
  if(st.e<cfg.maxE){st.e=Math.min(cfg.maxE,st.e+cfg.regen);ui();}
},1000);

// UI update
function ui(){
  document.getElementById('bal').textContent=st.bal.toLocaleString();
  document.getElementById('energyText').textContent=`${st.e} / ${cfg.maxE}`;
  document.getElementById('energyBar').style.width=(st.e/cfg.maxE*100)+'%';
  document.getElementById('handsLevel').textContent="Lv "+st.upgrades.hands;
  document.getElementById('swordLevel').textContent="Lv "+st.upgrades.sword;
  document.getElementById('aiLevel').textContent="Lv "+st.upgrades.ai;
}

// Upgrade menu
const upgradeMenu=document.getElementById('upgradeMenu');
function toggleUpgradeMenu(){upgradeMenu.style.display = upgradeMenu.style.display==='flex'?'none':'flex';}
document.getElementById('closeUpgrades').addEventListener('click',()=>{upgradeMenu.style.display='none';});

document.querySelectorAll('.upgrade-item').forEach(el=>{
  el.addEventListener('click',()=>{
    const type = el.dataset.type;
    let cost = (type==='hands'?10000:type==='sword'?25000:50000)*(st.upgrades[type]+1);
    if(st.bal<cost) return alert("Not enough MX!");
    st.bal -= cost;
    st.upgrades[type]++;
    ui();
  });
});

// Referral system
function addReferral(){st.bal+=25000; st.referrals++; alert("Referral added! +25k MX"); ui();}

// Premium Bot logic
function activateBot(duration='week'){ 
  if(st.botActive){alert("Bot already active!"); return;}
  const cost = duration==='week'?100:2000;
  if(st.bal<cost*1000){alert("Not enough MX for Bot!"); return;}
  st.bal-=cost*1000;
  st.botActive=true;
  alert("Matisov X AI activated for "+duration);
  let interval=setInterval(()=>{
    st.bal+=500; ui();
  },60000); // earns MX every minute
  setTimeout(()=>{
    clearInterval(interval);
    st.botActive=false;
    alert("Bot duration ended");
  },duration==='week'?7*24*60*60*1000:30*24*60*60*1000);
}

ui();
</script>
</body>
</html>'
